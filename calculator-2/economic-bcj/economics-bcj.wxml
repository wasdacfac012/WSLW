<view class="container">
  <view class="title">经济补偿金计算器</view>
  
  <!-- 说明内容 -->
  <view class="explanation">
    <view class="explanation-header" bindtap="toggleExplanation">
      <text class="explanation-title">经济补偿金适用情况说明</text>
      <text class="explanation-toggle {{showExplanation ? 'active' : ''}}">{{showExplanation ? '收起' : '展开'}}</text>
    </view>
    
    <view class="explanation-content" wx:if="{{showExplanation}}">
      <view class="explanation-section">
        <text class="section-title">1. 被迫离职相关法条和情况</text>
        <text class="section-content">
        用人单位有下列情形之一的，劳动者可以解除劳动合同：
        (一)未按照劳动合同约定提供劳动保护或者劳动条件的；
        (二)未及时足额支付劳动报酬的；
        (三)未依法为劳动者缴纳社会保险费的；
        (四)用人单位的规章制度违反法律、法规的规定，损害劳动者权益的；
        (五)因本法第二十六条第一款规定的情形致使劳动合同无效的；
        (六)法律、行政法规规定劳动者可以解除劳动合同的其他情形。
        用人单位以暴力、威胁或者非法限制人身自由的手段强迫劳动者劳动的，或者用人单位违章指挥、强令冒险作业危及劳动者人身安全的，劳动者可以立即解除劳动合同，不需事先告知用人单位。
        </text>
      </view>
      
      <view class="explanation-section">
        <text class="section-title">2. 无过失性辞退相关法条和情况</text>
        <text class="section-content">
        有下列情形之一的，用人单位提前三十日以书面形式通知劳动者本人或者额外支付劳动者一个月工资后，可以解除劳动合同：
        (一)劳动者患病或者非因工负伤，在规定的医疗期满后不能从事原工作，也不能从事由用人单位另行安排的工作的；
        (二)劳动者不能胜任工作，经过培训或者调整工作岗位，仍不能胜任工作的；
        (三)劳动合同订立时所依据的客观情况发生重大变化，致使劳动合同无法履行，经用人单位与劳动者协商，未能就变更劳动合同内容达成协议的。
        </text>
      </view>
      
      <view class="explanation-section">
        <text class="section-title">3. 经济性裁员相关法条和情况</text>
        <text class="section-content">
        有下列情形之一，需要裁减人员二十人以上或者裁减不足二十人但占企业职工总数百分之十以上的，用人单位提前三十日向工会或者全体职工说明情况，听取工会或者职工的意见后，裁减人员方案经向劳动行政部门报告，可以裁减人员：
        (一)依照企业破产法规定进行重整的；
        (二)生产经营发生严重困难的；
        (三)企业转产、重大技术革新或者经营方式调整，经变更劳动合同后，仍需裁减人员的；
        (四)其他因劳动合同订立时所依据的客观经济情况发生重大变化，致使劳动合同无法履行的。
        </text>
      </view>
      
      <view class="explanation-section">
        <text class="section-title">4. 合同到期降低待遇续签相关法条和情况</text>
        <text class="section-content">
        劳动合同期满，用人单位降低劳动合同约定条件续订劳动合同，劳动者不同意续订的，用人单位应当向劳动者支付经济补偿。
        </text>
      </view>
      
      <view class="explanation-section">
        <text class="section-title">5. 非因劳动者原因转入新单位相关法条和情况</text>
        <text class="section-content">
        用人单位发生合并或者分立等情况，原劳动合同继续有效，劳动合同由承继其权利和义务的用人单位继续履行。
        因用人单位被吊销营业执照、责令关闭、撤销或者用人单位决定提前解散、破产等原因，导致劳动合同终止的，用人单位应当向劳动者支付经济补偿。
        </text>
      </view>
      
      <view class="explanation-section">
        <text class="section-title">6. 用人单位提出协商一致解除劳动合同相关法条和情况</text>
        <text class="section-content">
        用人单位向劳动者提出解除劳动合同并与劳动者协商一致解除劳动合同的，用人单位应当向劳动者支付经济补偿。
        </text>
      </view>
    </view>
  </view>
  
  <view class="input-section">
    <view class="input-group">
      <text class="label">实际工作月数:</text>
      <input type="digit" class="input" placeholder="个月" bindinput="bindKeyInput" data-field="n" />
    </view>

    <view class="input-group">
      <text class="label">离职前十二个月平均应得工资/
      <br/>用工不足十二个月的为离职前用工月数平均工资:</text>
      <input type="digit" class="input" placeholder="元" bindinput="bindKeyInput" data-field="w" />
    </view>

    <view class="input-group">
      <text class="label">上年度职工平均工资<br/>(详情在浏览器中搜索这个):</text>
      <input type="digit" class="input" placeholder="元" bindinput="bindKeyInput" data-field="aw" />
    </view>
  </view>

  <button class="btn-calculate" bindtap="calculate">计算</button>

  <view class="result-area" wx:if="{{result !== null}}">
    <text class="result-title">经济补偿金:</text>
    <text class="result-value">{{result}} 元</text>
    <button class="btn-copy" bindtap="copyResult">复制结果</button>
    
    <view class="detail-toggle {{showDetail ? 'active' : ''}}" bindtap="toggleDetail">
      <text class="detail-toggle-text">{{showDetail ? '收起' : '展开'}}详细计算过程</text>
      <text class="detail-toggle-icon">{{showDetail ? '▲' : '▼'}}</text>
    </view>
    
    <view class="detail-process" wx:if="{{showDetail}}">
      <text class="detail-content">{{detailProcess}}</text>
    </view>
  </view>
</view>
